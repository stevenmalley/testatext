function openLyricsSearchWindow(){elid("textInputSection").classList.add("showLyricsSearch"),elid("lyricsSearch-query").value="",elid("lyricsSearch-query").focus(),elid("lyricsSearchResults").textContent=""}function closeLyricsSearchWindow(){elid("textInputSection").classList.remove("showLyricsSearch")}async function lyricsSearch(e){e.preventDefault(),elid("lyricsSearchResults").textContent="searching...";const t=encodeURIComponent(elid("lyricsSearch-query").value.slice(0,100).trim());if(t){let e=new FormData;e.append("q",t);const c=await fetch("./getLyrics.php",{method:"POST",body:e});if(c){const e=await c.text(),t=JSON.parse(e);if("success"===t.status){let e="";t.title&&(e=`*${t.title}*\n\n`),elid("textInput").value=(e+t.lyrics.trim()).slice(0,textInputLimit),inputUpdate(),closeLyricsSearchWindow(),elid("textInput").scroll(0,0)}else elid("lyricsSearchResults").textContent=t.error||"no results found"}else elid("lyricsSearchResults").textContent="no response from server, please try again later"}else elid("lyricsSearchResults").textContent="please provide the title of a song"}elid("activateLyricsSearch").onclick=openLyricsSearchWindow,elid("lyricsSearch").onclick=lyricsSearch,elid("lyricsSearchClose").onclick=closeLyricsSearchWindow;