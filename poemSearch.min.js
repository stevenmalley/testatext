function openPoemSearchWindow(){elid("textInputSection").classList.add("showPoemSearch")}function closePoemSearchWindow(){elid("textInputSection").classList.remove("showPoemSearch")}async function poetrySearch(e){e.preventDefault(),elid("poemSearchResults").textContent="searching...";const t=elid("poemSearch-author").value.slice(0,100).trim(),o=elid("poemSearch-title").value.slice(0,100).trim();let n=[],c=[];if(t&&(n.push("author"),c.push(t)),o&&(n.push("title"),c.push(o)),t||o){const e="https://poetrydb.org/"+n.join(",")+"/"+c.join(";"),t=await fetch(e);if(t){const e=await t.json();e instanceof Array&&e.length>0?createPoemButtons(e):elid("poemSearchResults").textContent="no results found"}else elid("poemSearchResults").textContent="no response from server, please try again later"}else elid("poemSearchResults").textContent="search for either an author, any words from a title, or both"}function createPoemButtons(e){const t=elid("poemSearchResults");t.replaceChildren(),e.forEach((e=>{let o=create("button",{textContent:e.title,className:"loadPoemButton",onclick:()=>{elid("textInput").value=e.lines.join("\n").slice(0,textInputLimit),inputUpdate(),closePoemSearchWindow(),elid("textInput").scroll(0,0)}},t);create("strong",{textContent:" "+e.author},o)}))}elid("activatePoemSearch").onclick=openPoemSearchWindow,elid("poemSearch").onclick=poetrySearch,elid("poemSearchClose").onclick=closePoemSearchWindow;